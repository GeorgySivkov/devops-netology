Вопрос 1: Проверьте список доступных сетевых интерфейсов на вашем компьютере. Какие команды есть для этого в Linux и в Windows?

Ответ: 

- Команды для Linux: ```ifconfig```, ```ip```, ```ls /sys/class/net``` (поиск в ядре), 
```cat /proc/net/dev``` (по статистике сетевых интерфейсов), ```netstat```, ```nmcli``` 
- Команды для Windows: ```IPCONFIG```, ```GETMAC```, ```NETSTAT```, ```NETSH```

На хостовом Mac 
```
georgijsivkov@MacBook-Pro-Georgij ~ % networksetup -listallhardwareports

Hardware Port: Wi-Fi
Device: en0
Ethernet Address: f0:18:98:03:9f:49

Hardware Port: Thunderbolt 1
Device: en1
Ethernet Address: 82:41:2d:24:d0:01

Hardware Port: Thunderbolt 2
Device: en2
Ethernet Address: 82:41:2d:24:d0:00

Hardware Port: Thunderbolt 3
Device: en3
Ethernet Address: 82:41:2d:24:d0:05

Hardware Port: Thunderbolt 4
Device: en4
Ethernet Address: 82:41:2d:24:d0:04

Hardware Port: Thunderbolt Bridge
Device: bridge0
Ethernet Address: 82:41:2d:24:d0:01
```

на виртуалке с Linux

```
vagrant@vagrant:~$ ip -c -br link
lo               UNKNOWN        00:00:00:00:00:00 <LOOPBACK,UP,LOWER_UP> 
eth0             UP             08:00:27:b1:28:5d <BROADCAST,MULTICAST,UP,LOWER_UP> 
```

---
Вопрос 2: Какой протокол используется для распознавания соседа по сетевому интерфейсу? Какой пакет и команды есть в Linux для этого? 

Ответ: LLDP - протокол для обмена информацией между соседними устройствами, позволяет определить к какому порту коммутатора подключен сервер. 

- ```lldpd``` - пакет
- ```lldpctl```, ```lldp``` - команды

---
Вопрос 3: Какая технология используется для разделения L2 коммутатора на несколько виртуальных сетей? Какой пакет и команды есть в Linux для этого? Приведите пример конфига.

Ответ: VLAN - виртуальное разделение коммутатора. 

- ```vlan``` - пакет
- ```vconfig```, ```add```, ```rem```, ```set_flag```, ```set_egress_map```, ```set_ingress_map```, ```set_name_type``` - команды

Пример:
```
auto vlan1400
iface vlan1400 inet static 
    address 192.168.1.1
    netmask 255.255.255.0
    vlan_raw_device eth0
    
auto eth0.1400
    iface eth0.1400 inet static 
    address 192.168.1.1
    netmask 255.255.255.0
    vlan_raw_device eth0
```

---
Вопрос 4: Какие типы агрегации интерфейсов есть в Linux? Какие опции есть для балансировки нагрузки? Приведите пример конфига.

Ответ:

Типы агрегации Linux:

- Статичный
- Динамичный

Опции агрегации Linux:
- ```Mode-0(balance-rr)``` Данный режим используется по умолчанию.
- ```Balance-rr``` обеспечивается балансировку нагрузки и отказоустойчивость. В данном режиме сетевые пакеты отправляются “по кругу”, от первого интерфейса к последнему. Если выходят из строя интерфейсы, пакеты отправляются на остальные оставшиеся. Дополнительной настройки коммутатора не требуется при нахождении портов в одном коммутаторе. При разностных коммутаторах требуется дополнительная настройка.
- ```Mode-1(active-backup)``` Один из интерфейсов работает в активном режиме, остальные в ожидающем. При обнаружении проблемы на активном интерфейсе производится переключение на ожидающий интерфейс. Не требуется поддержки от коммутатора.
- ```Mode-2(balance-xor)``` Передача пакетов распределяется по типу входящего и исходящего трафика по формуле ((MAC src) XOR (MAC dest)) % число интерфейсов. Режим дает балансировку нагрузки и отказоустойчивость. Не требуется дополнительной настройки коммутатора/коммутаторов.
- ```Mode-3(broadcast)``` Происходит передача во все объединенные интерфейсы, тем самым обеспечивая отказоустойчивость. Рекомендуется только для использования MULTICAST трафика.
- ```Mode-4(802.3ad)``` динамическое объединение одинаковых портов. В данном режиме можно значительно увеличить пропускную способность входящего так и исходящего трафика. Для данного режима необходима поддержка и настройка коммутатора/коммутаторов.
- ```Mode-5(balance-tlb)``` Адаптивная балансировки нагрузки трафика. Входящий трафик получается только активным интерфейсом, исходящий распределяется в зависимости от текущей загрузки канала каждого интерфейса. Не требуется специальной поддержки и настройки коммутатора/коммутаторов.
- ```Mode-6(balance-alb)``` Адаптивная балансировка нагрузки. Отличается более совершенным алгоритмом балансировки нагрузки чем Mode-5). Обеспечивается балансировку нагрузки как исходящего так и входящего трафика. Не требуется специальной поддержки и настройки коммутатора/коммутаторов.

Пример:
```
auto lo
iface lo inet loopback

auto eth0
iface eth0 inet manual
bond-master bond0

auto eth1
iface eth1 inet manual
bond-master bond0

auto bond0
iface bond0 inet dhcp
bond-mode 4
bond-slaves eth0 eth1
```

---
Вопрос 5: Сколько IP адресов в сети с маской /29 ? Сколько /29 подсетей можно получить из сети с маской /24. Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.

Ответ: 

- В сети с маской /29 может быть 8 адресов.
- В сети с маской /24 может быть 31 подсеть с маской /29.   
Расчет: В сети с маской /24 есть 256 адресов, 2 адреса нельзя использовать, т.к. они используются для широковещательного адреса и для адреса данной сети. Итого для подсетей мы можем использовать 254 адреса.   
В маске /29 может находиться 8 адресов - ```254/8=31,75```. Т.е. мы можем использовать 31 подсеть с маской /29 в сети с маской /24 

Пример:
```
IP адрес подсети 10.10.10.0
Маска подсети 255.255.255.248
Префикс маски /29
Диапазон адресов 10.10.10.1 - 10.10.10.31
```

---
Вопрос 6: Задача: вас попросили организовать стык между 2-мя организациями. Диапазоны 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 уже заняты. Из какой подсети допустимо взять частные IP адреса? Маску выберите из расчета максимум 40-50 хостов внутри подсети.

Ответ: Можно использовать 10.64.0.0/10

Комментарий: Не понял на самом деле где опечатка. Логика моя следующая: из 4 неанонсированных подсетей 3 заняты, поэтому можно использовать только 100.64.0.0. В первом решении указал маску /26, т.к. она содержит 62 свободных хоста, а это первое большее число после 50.   
Возможно моя ошибка в том, что маска подсети указывается /10 по спеке, и распределение адресов никем не контролируется, поэтому надо использовать с этой маской. Собственно /10 тоже можно использовать, т.к. количество свободных хостов в ней - 4 194 302.  

---
Вопрос 7: Как проверить ARP таблицу в Linux, Windows? Как очистить ARP кеш полностью? Как из ARP таблицы удалить только один нужный IP? 

- ```ip neighbour``` - Linux
- ```arp -a``` - Windows
- ```ip -s neigh flush all``` - удалить весь кеш из ARP, но остаются записи ```incomplete```. В интернете советуют использовать однострочник ```ip link set arp off dev eth0; ip link set arp on dev eth0```
- ```arp -d <IP>``` - удалить конкретный адрес из ARP.